## PlatONE中的基本概念
* 节点
PlatONE中的节点主要有以下几类：

    + 观察者节点: 只负责同步区块，不参与出块。系统中将会一直存在几个稳定的观察者节点，用于稳定同步区块，同时也用于被其他的节点指定为bootnodes进行连接;

    + 共识节点: 参与出块，以及同步区块;

* 账户
    相比账户模型，UTXO不支持智能合约，而很多的DAG项目也在积极探索智能合约，但是还没有成熟稳定的解决方案，因此PlatONE选择成熟稳定支持智能合约的账户模型。PlatONE中，每个账户都有一个与之关联的状态(state)和一个20字节的地址(address)。账户分为两类：

    + 普通账户: 该类型账户由私钥控制，用户可通过钱包客户端生成。在PlatONE中，普通账户可以创建交易，并使用私钥对交易签名。普通账户除保存账户余额外，智能合约可被授权扩展和访问自定义属性。

    + 合约账户: 该类型账户没有私钥，由代码控制，合约账户地址在部署合约时产生。与普通账户不同，合约账户不能自行发起新的交易。每当合约账户收到一条消息，合约内部的代码就会被激活，允许它对内部存储进行读取和写入，以及发送其它消息或者创建合约。

* 智能合约(Wasm介绍)
    Wasm合约支持高级语言开发，编译成wasm执行。触发Wasm合约的交易由共识节点打包，全网节点重复执行验证。Wasm合约的状态保存在公共账本中。

    可验证合约的开发和发布跟Wasm合约没有区别，最终也是编译成wasm执行。可验证合约的状态转换在链下由计算节点异步执行，计算完成后新的状态和状态转换证明提交到链上，全网节点可快速验证正确性并将新的状态更新到公共账本中。可验证合约可支持复杂、繁重的计算逻辑而不影响整条链的性能。

    隐私合约同样支持高级语言开发，编译成llvm ir中间语言执行。隐私合约的输入数据保存在数据节点本地，由数据节点在链下以安全多方计算方式进行隐私计算，并提交计算结果到链上。


## PlatONE中的共识算法
PlatONE的共识为高度优化的BFT类共识算法，其容错率为1/3，在保留即时确认（instant finality）的关键特性的同时，极大地提高了去中心化的程度。共识可以保证上链的区块是确定的，也就是说链不会出现分叉，同时每一个有效的区块都会插入到链上。

PlatONE的共识支持超过100个共识节点。相对于其他一些常见的BFT共识，PlatONE的共识的性能有显著的提升。在10个共识节点的情况下，TPS 接近 1000。

PlatONE的共识运行的相关参数可以灵活地进行配置，并且 PlatONE的共识中的共识节点集合可以灵活地进行更新。近期计划支持共识的插件化，以及共识的可审计性等。

PlatONE共识是在 round 上进行的。在特定的 round 上，通过预先设置的策略选取一个出块者节点。出块者节点的选取策略目前支持两种：round robin 和 sticky proposer。

出块者节点提议区块后，各共识节点进行共识。共识分三阶段，其中后两个阶段为投票阶段，用以保证 safety。PlatONE共识使用 round change 机制结合锁定和解锁机制来保证共识的的 liveness 。通过优化解锁机制，解决了业界多个知名项目内存在的共识死锁问题。

PlatONE共识会为每一个链上的区块生成共识证明，也就是对于该区块的各共识节点的有效签名，因而区块可以进行自验证，同时也能支持轻节点。

## PlatONE中的权限模型
根据系统中的不同实体对象，PlatONE将权限管理进行了模块化的拆分。针对系统中用户账户、节点和智能合约，这三类实体的不同行为，分别设计了用户角色管理模块、节点管理模块和合约防火墙模块来进行权限的控制和管理。

+ 角色管理

  PlatONE根据不同的权限，设定了不同的用户角色，并通过系统合约的方式对用户的角色进行管理。根据不同的角色，用户在系统中被赋予不同的权限。目前设定了如下角色：

![1](./images/permission_roles.png)

  每个角色的权限范围如下：

![1](./images/permission_table.png)

+ 节点管理

  PlatONE通过节点管理合约对节点进行管理，包括节点是否能够接入网络，节点是否能够参与共识以及节点信息的维护等功能。根据之前用户角色的设定，只有chainCreator、chainAdmin和nodeAdmin这三类用户才可以设置系统合约中的节点数据，当需要添加节点、更新节点状态、删除节点时都需要这三类账户来调用节点管理合约。需要注意的是nodeAdmin仅可以管理自己加入的节点，chainCreator和chainAdmin可以管理所有节点。

+ 合约防火墙

  PlatONE中合约的调用权限由合约防火墙控制，只有合约的创建者才可以设置该合约的防火墙。

  合约防火墙具备合约接口级别的访问控制，通过如下两个列表实现：

  + ACCEPT: 可以访问相应接口的地址列表，相当于白名单
  + REJECT: 拒绝访问相应接口的地址列表，相当于黑名单


