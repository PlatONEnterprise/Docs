# 数据结构与编码协议

[TOC]

## 编码协议

PlatONE同时支持Wasm虚拟机与EVM虚拟机，且允许Wasm合约与EVM合约之间的互调用。Wasm合约相关交易的data字段采用RLP编码，而evm合约相关交易的data字段则采用以太坊原生的编码方式。本节着重介绍RLP编码，以太坊的编码方式请详见[Solidity官网](<https://solidity.readthedocs.io/en/latest/abi-spec.html?highlight=abi>)

### RLP编码注意事项

[RLP编码注意事项](RLP编码注意事项.md)

## 交易结构

PlatONE的交易(Transaction)数据结构在原以太坊基础上添加了txType字段。

|name|type|description|
|:--|:--|:--|
|from       |common.Address |交易发送方账户地址|
|to         |*common.Address|交易接收方账户地址|
|gas        |*hexutil.Uint64|单次交易允许的gas数量，用于限制合约的运行|
|gasPrice   |*hexutil.Big   |单位gas所需的价格数量|
|value      |*hexutil.Big   |(TODO)|
|nonce      |*hexutil.Uint64|交易发送方产生的随机值，用于？？？|
|txType     |uint64         |交易类型，目前PlatONE有六种交易类型：防火墙(fwTxType),合约迁移(migTxType),合约名称调用(cnsTxType),合约部署(deploy),普通调用,转账(transfer)|
|data       |*hexutil.Bytes |交易相关的数据，经过编码处理得到。部分交易类型会在data字段也附上txType|

## 交易回执

PlatONE交易回执延用了以太坊的交易回执数据结构
