<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>浏览器 - PlatONE</title>
    <link href="../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../js/jquery-3.2.1.min.js"></script>
    <script src="../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "\u533a\u5757\u94fe\u6d4f\u89c8\u5668", url: "#_top", children: [
              {title: "1. \u529f\u80fd", url: "#1" },
              {title: "2. \u90e8\u7f72", url: "#2" },
              {title: "3. \u9644\u5f55", url: "#3" },
          ]},
        ];

    </script>
    <script src="../../js/base.js"></script>
      <script src="../../mathjax-config.js"></script>
      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../../JSON-RPC_API/JSON-RPC_API/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../../JSON-RPC_API/JSON-RPC_API/" class="btn btn-xs btn-link">
        JSON-RPC API
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../../SDK/JAVA-SDK/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../../SDK/JAVA-SDK/" class="btn btn-xs btn-link">
        Java - SDK
      </a>
    </div>
    
  </div>

    

    <h1 id="_1">区块链浏览器</h1>
<p>本项目是platone浏览器项目，兼容浏览器IE9及以上，360浏览器兼容版（IE9内核），360浏览器极速版，chrome浏览器。</p>
<p><img alt="" src="../images/%E6%B5%8F%E8%A7%88%E5%99%A8.png" /></p>
<h2 id="1">1. 功能</h2>
<p>(1)、主要功能是区块链概览，查看区块，查看交易，查看账户状态。</p>
<p>(2)、区块链概览，查看区块，查看交易和账户页面每10s执行一轮请求。</p>
<h2 id="2">2. 部署</h2>
<h3 id="21">2.1. 依赖环境</h3>
<table>
<thead>
<tr>
<th>环境</th>
<th>版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>nginx</td>
<td>nginx1.6或以上版本</td>
</tr>
<tr>
<td>java</td>
<td>jdk1.8或以上版本</td>
</tr>
<tr>
<td>mysql</td>
<td>mysql-5.6或以上版本</td>
</tr>
</tbody>
</table>
<ul>
<li>nginx安装请参考附录</li>
</ul>
<h3 id="22">2.2. 后端配置</h3>
<p>代码clone：</p>
<pre class="codehilite"><code class="language-shell">git clone git@172.16.211.192:PlatONE/src/explorer/explore-java.git</code></pre>

<p>数据库配置：</p>
<pre class="codehilite"><code class="language-shell">#连接mysql
mysql -u root -p

#导入默认表
use platone_explore;
source ${PathToExplorerProject}/db/bcos_browser_table.sql </code></pre>

<p>java service启动：</p>
<p>修改application.yml：</p>
<ul>
<li>服务端口配置</li>
<li>数据库连接配置</li>
</ul>
<pre class="codehilite"><code class="language-java">//服务端口
server:
  port: 9600
spring:
  profiles:
    active: dev      
//数据库配置
  datasource:
    url: jdbc:mysql://127.0.0.1:3306/platone_explore?serverTimezone=Asia/Shanghai&amp;characterEncoding=utf-8&amp;useSSL=false&amp;autoReconnect=true&amp;autoReconnectForPools=true
    username: root
    password: 123456
    driver-class-name: com.mysql.cj.jdbc.Driver
    sql-script-encoding: UTF-8</code></pre>

<p>启动java service：</p>
<ul>
<li>运行BcosBrowserApplication.java</li>
</ul>
<h3 id="23">2.3. 前端配置</h3>
<p>代码clone：</p>
<pre class="codehilite"><code class="language-shell">git clone git@172.16.211.192:PlatONE/src/explorer/client.git</code></pre>

<p>编译：</p>
<pre class="codehilite"><code class="language-shell">cd explore/client
npm run build</code></pre>

<ul>
<li>静态资源目录./dist</li>
</ul>
<p>修改nginx配置</p>
<p>在./doc文件下有nginx配置文件，直接可以拿来替换安装的nginx的配置文件nginx.conf；</p>
<p><strong>注意</strong>：如果按照附录安装的nginx，配置文件路径在/usr/local/nginx/conf/nginx.conf 。</p>
<p>然后修改nginx.conf；</p>
<ol>
<li>修改前端服务的ip地址和端口。</li>
<li>修改前端文件的路径,直接指向已拉取代码的dist目录。</li>
<li>修改后端服务的ip和端口，注意'/api'不要修改。</li>
</ol>
<pre class="codehilite"><code class="language-Nginx">    server {
            listen       8088 default_server;   //步骤1、前端端口
            server_name  192.168.0.1;         //步骤1、前端地址，可配置为域名
            location / {
                    root    /home/explore/client/dist;   //步骤2、前端文件路径
                    index  index.html index.htm;
                    try_files $uri $uri/ /index.html =404;
                }

            # Load configuration files for the default server block.
            include /etc/nginx/default.d/*.conf;

            location /api {
                    proxy_pass    http://192.168.0.1:9600/;    //步骤3、后端服务地址及端口
                    proxy_set_header        Host                $host;
                    proxy_set_header        X-Real-IP           $remote_addr;
                    proxy_set_header        X-Forwarded-For     $proxy_add_x_forwarded_for;
            }
            }</code></pre>

<h3 id="24-nginx">2.4 启动nginx</h3>
<p>(1)、启动nginx。
启动命令：</p>
<pre class="codehilite"><code class="language-shell">/usr/local/nginx/sbin/nginx   </code></pre>

<p>启动报错重点排查：日志路径是否正确（error.log和access.log），nginx有没有添加用户权限。</p>
<p>(2)、打开页面，页面url是nginx配置的前端端口和前端ip。
例如:上面配置文件的url为   http:192.168.0.1:8088</p>
<h2 id="3">3. 附录</h2>
<h3 id="31-nginx">3.1 安装nginx（可参考<a href="http://www.runoob.com/linux/nginx-install-setup.html">网络教程</a>）</h3>
<h4 id="311-nginx">3.1.1 下载nginx依赖</h4>
<p>在安装nginx前首先要确认系统中安装了gcc、pcre-devel、zlib-devel、openssl-devel。如果没有，请执行命令</p>
<pre class="codehilite"><code>yum -y install gcc pcre-devel zlib-devel openssl openssl-devel</code></pre>


<p>执行命令时注意权限问题，如遇到，请加上sudo</p>
<h4 id="312-nginx">3.1.2 下载nginx</h4>
<p>nginx下载地址：https://nginx.org/download/（下载最新稳定版本即可）
或者使用命令：</p>
<pre class="codehilite"><code>wget http://nginx.org/download/nginx-1.10.2.tar.gz  (版本号可换)</code></pre>


<p>将下载的包移动到/usr/local/下</p>
<h4 id="313-nginx">3.1.3. 安装nginx</h4>
<h5 id="3131">3.1.3.1. 解压</h5>
<pre class="codehilite"><code>tar -zxvf nginx-1.10.2.tar.gz</code></pre>


<h5 id="3132-nginx">3.1.3.2. 进入nginx目录</h5>
<pre class="codehilite"><code>cd nginx-1.10.2</code></pre>


<h5 id="3133">3.1.3.3. 配置</h5>
<pre class="codehilite"><code>./configure --prefix=/usr/local/nginx</code></pre>


<h5 id="3134-make">3.1.3.4. make</h5>
<pre class="codehilite"><code>make
make install</code></pre>


<h5 id="3135">3.1.3.5. 测试是否安装成功</h5>
<p>使用命令：</p>
<pre class="codehilite"><code>/usr/local/nginx/sbin/nginx –t</code></pre>


<p>正常情况的信息输出：</p>
<pre class="codehilite"><code>nginx: the configuration file /usr/local/nginx/conf/nginx.conf syntax is ok
nginx: configuration file /usr/local/nginx/conf/nginx.conf test is successful</code></pre>


<h5 id="3136-nginx">3.1.3.6. nginx几个常见命令</h5>
<pre class="codehilite"><code class="language-shell">/usr/local/nginx/sbin/nginx -s reload            # 重新载入配置文件
/usr/local/nginx/sbin/nginx -s reopen            # 重启 Nginx
/usr/local/nginx/sbin/nginx -s stop              # 停止 Nginx
ps -ef | grep nginx                              # 查看nginx进程</code></pre>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../../JSON-RPC_API/JSON-RPC_API/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../../JSON-RPC_API/JSON-RPC_API/" class="btn btn-xs btn-link">
        JSON-RPC API
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../../SDK/JAVA-SDK/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../../SDK/JAVA-SDK/" class="btn btn-xs btn-link">
        Java - SDK
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>