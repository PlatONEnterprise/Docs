PlatONE利用零知识证明和paillier同态加密算法来隐藏用户在令牌合约中的余额和交易过程中的金额，从而实现了隐私密码令牌功能。为了在保证令牌合约中资产安全性的前提下，达到保护用户隐私的需求，用户在使用隐私令牌合约时，需要使用线下工具生成同态加密算法的公私钥和交易过程中的零知识证明。

隐私密码令牌的业务流程主要包含令牌发行（初始化），用户开户（向token合约注册自己的公钥）和转账。上述流程都需要线下工具和线上合约调用两个部分配合。

- 令牌发行

  在token合约部署时需要令牌发行方预先利用nizkpail（线下工具）生成自己的令牌账户公钥，并预先给该账户分配待发行的所有令牌（金额密文）。

- 用户开户

  用户需要预先在线下生成同态加密算法的公私钥对。合约没有提供显式的开户注册接口，隐私令牌的持有人向新用户的转账可以看作是新用户的注册操作，新用户的初始状态是该转账的交易金额（密文形式）。

- 转账

  转账过程需要交易发送方线下生成该交易的零知识证明，并将该证明作为转账交易的输入，供token合约验证。令牌合约在验证该证明的有效性后，才对交易双方的账户状态进行更新（金额密文，需要使用同态加减）。
